{"version":3,"sources":["./src/app/pages/chat-room/chat-room.page.html","./src/app/pages/chat-room/chat-room.module.ts","./src/app/pages/chat-room/chat-room.page.scss","./src/app/pages/chat-room/chat-room.page.ts"],"names":[],"mappings":"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","file":"pages-chat-room-chat-room-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar _bg-theme-color>\\n      <ion-icon *ngIf=\\\"api.admin\\\" slot=\\\"start\\\" name=\\\"arrow-round-back\\\" padding style=\\\"padding-right: 0px\\\" (click)=\\\"goBack()\\\"></ion-icon>\\n      <ion-avatar slot=\\\"start\\\" padding>\\n          <img src=\\\"../../../assets/imgs/avatar/avatar9.jpg\\\">\\n      </ion-avatar>\\n      <ion-title no-padding>{{ user?.name }}</ion-title>\\n      <ion-icon name=\\\"videocam\\\" slot=\\\"end\\\" padding></ion-icon>\\n      <ion-icon name=\\\"call\\\" slot=\\\"end\\\" padding></ion-icon>\\n      <ion-icon *ngIf=\\\"api.admin\\\" name=\\\"more\\\" slot=\\\"end\\\" padding></ion-icon>\\n      <ion-icon *ngIf=\\\"!api.admin\\\" name=\\\"log-out\\\" (click)=\\\"logout()\\\" slot=\\\"end\\\" padding></ion-icon>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n\\n<ion-content bg-sky>\\n  <div *ngFor=\\\"let mess of messages\\\">\\n    <div flex flow-right *ngIf=\\\"mess.type==userType\\\">\\n        <ion-card bg-light>\\n            <ion-card-content style=\\\"padding-bottom: 0px;\\\">\\n            {{ mess.msg }}  \\n            </ion-card-content>\\n            <p text-right no-margin light-time>{{ api.formatAMPM(mess.timestamp.toDate()) }}</p>\\n        </ion-card>\\n    </div>\\n    <div flex *ngIf=\\\"mess.type!=userType\\\">\\n        <ion-card bg-white>\\n            <ion-card-content style=\\\"padding-bottom: 0px;\\\">\\n            {{ mess.msg }}  \\n            </ion-card-content>\\n            <p text-right no-margin light-time>{{ api.formatAMPM(mess.timestamp.toDate()) }}</p>\\n        </ion-card>\\n    </div>\\n  </div>\\n  \\n  <div *ngIf=\\\"loader\\\" flex v-center h-center style=\\\"height: 100%;\\\">\\n      <ion-spinner name=\\\"crescent\\\" color=\\\"success\\\" style=\\\"width: 100px; height: 100px;\\\"></ion-spinner>\\n  </div>\\n</ion-content>\\n\\n\\n<ion-footer>\\n    <ion-toolbar>\\n        <div slot=\\\"start\\\" padding>\\n          ðŸ˜€\\n        </div>\\n        <ion-input [(ngModel)] = \\\"chat\\\"\\n          placeholder=\\\"Type here...\\\"\\n        ></ion-input>\\n        <ion-icon (click)=\\\"sendChat()\\\" name=\\\"send\\\" slot=\\\"end\\\" padding></ion-icon>\\n    </ion-toolbar>\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatRoomPage } from './chat-room.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatRoomPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ChatRoomPage]\n})\nexport class ChatRoomPageModule {}\n","module.exports = \"ion-card {\\n  width: 80%;\\n}\\n\\n[flow-right] {\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: reverse;\\n          flex-flow: row-reverse;\\n}\\n\\n[bg-sky] {\\n  --background: #f8fafa;\\n}\\n\\n[bg-white] {\\n  --background: #fff;\\n  --color: #000;\\n}\\n\\n[bg-light] {\\n  --background: #cfebb1;\\n  --color: #000;\\n}\\n\\n[light-time] {\\n  color: #6a6a6a;\\n  font-size: 0.7rem;\\n  padding: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2hhdC1yb29tL2U6XFxpb25pYyA1XFxtZXNzZW5nZXIvc3JjXFxhcHBcXHBhZ2VzXFxjaGF0LXJvb21cXGNoYXQtcm9vbS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NoYXQtcm9vbS9jaGF0LXJvb20ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksVUFBQTtBQ0NKOztBRENBO0VBQ0ksOEJBQUE7RUFBQSw4QkFBQTtVQUFBLHNCQUFBO0FDRUo7O0FERUE7RUFDSSxxQkFBQTtBQ0NKOztBRENBO0VBQ0ksa0JBQUE7RUFDQSxhQUFBO0FDRUo7O0FEQUE7RUFDSSxxQkFBQTtFQUNBLGFBQUE7QUNHSjs7QUREQTtFQUNJLGNBQUE7RUFDQSxpQkFBQTtFQUNBLFlBQUE7QUNJSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NoYXQtcm9vbS9jaGF0LXJvb20ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNhcmQge1xyXG4gICAgd2lkdGg6IDgwJTtcclxufVxyXG5bZmxvdy1yaWdodF0ge1xyXG4gICAgZmxleC1mbG93OiByb3ctcmV2ZXJzZTtcclxufVxyXG5cclxuXHJcbltiZy1za3ldIHtcclxuICAgIC0tYmFja2dyb3VuZDogI2Y4ZmFmYTtcclxufVxyXG5bYmctd2hpdGVde1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjZmZmO1xyXG4gICAgLS1jb2xvcjogIzAwMDtcclxufVxyXG5bYmctbGlnaHRdIHtcclxuICAgIC0tYmFja2dyb3VuZDogI2NmZWJiMTtcclxuICAgIC0tY29sb3I6ICMwMDA7XHJcbn1cclxuW2xpZ2h0LXRpbWVdIHtcclxuICAgIGNvbG9yOiAjNmE2YTZhO1xyXG4gICAgZm9udC1zaXplOiAwLjdyZW07XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbn0iLCJpb24tY2FyZCB7XG4gIHdpZHRoOiA4MCU7XG59XG5cbltmbG93LXJpZ2h0XSB7XG4gIGZsZXgtZmxvdzogcm93LXJldmVyc2U7XG59XG5cbltiZy1za3ldIHtcbiAgLS1iYWNrZ3JvdW5kOiAjZjhmYWZhO1xufVxuXG5bYmctd2hpdGVdIHtcbiAgLS1iYWNrZ3JvdW5kOiAjZmZmO1xuICAtLWNvbG9yOiAjMDAwO1xufVxuXG5bYmctbGlnaHRdIHtcbiAgLS1iYWNrZ3JvdW5kOiAjY2ZlYmIxO1xuICAtLWNvbG9yOiAjMDAwO1xufVxuXG5bbGlnaHQtdGltZV0ge1xuICBjb2xvcjogIzZhNmE2YTtcbiAgZm9udC1zaXplOiAwLjdyZW07XG4gIHBhZGRpbmc6IDVweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/api/api.service';\n\n@Component({\n  selector: 'app-chat-room',\n  templateUrl: './chat-room.page.html',\n  styleUrls: ['./chat-room.page.scss'],\n})\nexport class ChatRoomPage implements OnInit {\n  user: any;\n  chat: string;\n  unsubscribe: any;\n  messages: any = [];\n  chatKeys: any = [];\n  userType: string;\n  loader: boolean = true;\n\n  constructor(\n    private api: ApiService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) { \n    this.route.queryParamMap.subscribe(snap => { \n      this.user = snap['params'];\n      this.getChat();\n    });\n    this.userType = this.api.admin ? 'admin' : 'user';\n  }\n\n  ngOnInit() {\n  }\n\n  goBack() {\n    this.router.navigate(['/home'], { skipLocationChange: false });\n  }\n\n  logout() {\n    console.log('lgout');\n    this.api.signOut();\n  }\n  \n  sendChat() {\n    this.chat ? console.log(this.chat) : '';\n\n    if(this.chat){\n      this.api.sendMsg(this.user.id, this.chat, this.userType);\n    }\n\n    this.chat = '';\n  }\n\n  getChat() {\n    console.log('get chat', this.user.id);\n    this.unsubscribe = this.api.db.collection(\"chatRoom\").where(\"id\", \"==\", this.user.id) \n    .onSnapshot((querySnapshot)=> {\n        this.loader = false;\n        querySnapshot.forEach((doc)=> {\n            // doc.data() is never undefined for query doc snapshots\n            let data = doc.data();\n            if(this.chatKeys.indexOf(data.key) < 0){\n              this.messages.push(data);\n              this.chatKeys.push(data.key);\n            }\n            console.log(doc.data());\n        });\n        this.messages.sort(this.sortDate);\n    });\n  }\n\n  sortDate(a, b) {  \n    var dateA = new Date(a.timestamp.toDate()); \n    var dateB = new Date(b.timestamp.toDate()); \n    return dateA > dateB ? 1 : -1;  \n  };\n\n\n  ionViewWillLeave() {\n    this.api.admin ? this.unsubscribe() : '';\n    console.log('unsubscribe successfully');\n  }\n}\n"],"sourceRoot":""}